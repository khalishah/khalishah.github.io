<!DOCTYPE html>
<title>02.526 Data Visualisation Project</title>
<link href="https://fonts.googleapis.com/css?family=Barlow:100,200,300,400,500&display=swap" rel="stylesheet">
<script src="https://d3js.org/d3.v4.js"></script>
<html lang="en">
    <head>
        <style>
            iframe {
              width: 100%;
			        height: 800px;
              border:0px;
            }

            h1{
                text-align:center;
                border: 2px solid black;
                display: inline;
                margin:auto;
                position: absolute;
                top: 25%;
                right: 36%;
                color:white;
                font-size:45px;
                background-color:black;
                
            }
            #head_gif{
                background-image:url('original.gif');
                background-position: center;
                background-size: cover;
                height:  500px;
                text-align:center;
            }
            head, p {
                font-family: "Barlow";
                text-align: justify;

            }
            p, ul, #avg_components {
                padding-left:5%;
                padding-right:5%;
            }
            #one{
                background-color:lightcyan;
            }
            * {
                background-color:lightcyan;
                font-family: "Barlow";
            }
        </style>
        <div id="head_gif">
        <center><h1>Mental Wellness in USA</h1></center>

      </div>
        
    </head>
    <body>
        <p><i>A Collaboration Project of Felicia Chan Jia Hui (1005682) & Khalishah Nadhirah Bte Abu Bakar (1000668)</i></p>
        <p id="one">As COVID-19 spread throughout the United States, it not only resulted in greater morbidity and mortality in
            terms of physical health but also had disastrous effects on the mental health of the nation. As opposed to
            previous disasters in the United States that affected certain specific regions or populations where aid and trauma
            response could be concentrated, the COVID-19 pandemic has affected the entire population of the country.
            While the risk of contracting the disease itself is a population-wide traumatizing event, the United States's physical and social
            environments have changed as well, leading to greater rates of isolation and loneliness, financial hardship,
            housing and food insecurity, and interpersonal violence. Further, the COVID-19 pandemic has highlighted and
            exacerbated existing inequities and injustices faced primarily by black, indigenous, and people of color (BIPOC)
            in the United States. Any of these factors by themselves can negatively affect the mental health of individuals,
            but in combination they have created a nationwide mental health crisis. (Mental Health America, 2021)</p>
            <center><h2>Assessing USA's Mental Health Index</h2></center></div>
            <p>
                Therefore, to better understand mental health in the United states, we have come up with six indicators to assess mental health scores on.
                <ul>
                    <li><b>Family MH History</b>: Do you have a family history of mental illness?</li>
  
                    <li><b>Finding Treatment</b>: Have you sought treatment for a mental health condition?</li>

                    <li><b>Work Interference</b>: If you have a mental health condition, do you feel that it interferes with your work?</li>
 
                    <li><b>Medical Leave</b>: How easy is it for you to take medical leave for a mental health condition?</li>
   
                    <li><b>Negative Effects</b>: Do you think that discussing a mental health issue with your employer would have negative consequences?</li>

                    <li><b>Talk to Coworkers</b>: Would you be willing to discuss a mental health issue with your co-workers?</li>
  
                    <li><b>Talk to Supervisor</b>: Would you be willing to discuss a mental health issue with your direct supervisor(s)?</li>
                    </ul>
            </p>
            <center><h2>USA's Mental Health Indicators on average...</h2></center></div>
            <p>
            Performs mediocrely in the variables on <i>Medical Leave</i> & <i>Negative Effects</i>. More work has to be done in the United States as a whole to ensure that workers are well taken care of.
            </p>
            <div id="avg_components"></div>
            <center><h2>Viewing each state's Mental Health performance...</h2></center></div>
            <!-- <p>To better understand the performance in each state, a chloropeth map was projected.</p> -->
            <iframe src="chart.html" scrolling="no"  name="myFrame"></iframe>
        <center><p>Information & Data sources obtained from: <a href="https://mhanational.org/sites/default/files/Spotlight%202021%20-%20COVID-19%20and%20Mental%20Health.pdf">Mental Health America</a> & <a href='https://www.kaggle.com/osmi/mental-health-in-tech-survey'>Kaggle</a></p></center>
        <script>

            // set the dimensions and margins of the graph
            var margin = {top: 10, right: 30, bottom: 40, left: 100},
                width = 1460 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;
            
            // append the svg object to the body of the page
            var svg = d3.select("#avg_components")
              .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
              .append("g")
                .attr("transform",
                      "translate(" + margin.left + "," + margin.top + ")");
            
            // Parse the Data
            d3.csv("average.csv", function(data) {
            
            // sort data
            data.sort(function(b, a) {
              return a.Value - b.Value;
            });
            
            // Add X axis
            var x = d3.scaleLinear()
              .domain([0, 0.7])
              .range([ 0, width]);
            svg.append("g")
              .attr("transform", "translate(0," + height + ")")
              .call(d3.axisBottom(x))
              .selectAll("text")
                .attr("transform", "translate(-10,0)rotate(-45)")
                .style("text-anchor", "end");
            
            // Y axis
            var y = d3.scaleBand()
              .range([ 0, height ])
              .domain(data.map(function(d) { return d.cat; }))
              .padding(1)
              .style("font-size", "small");
            svg.append("g")
              .call(d3.axisLeft(y))
            
            // Lines
            svg.selectAll("myline")
              .data(data)
              .enter()
              .append("line")
                .attr("x1", x(0))
                .attr("x2", x(0))
                .attr("y1", function(d) { return y(d.cat); })
                .attr("y2", function(d) { return y(d.cat); })
                .attr("stroke", "grey")
            
            // Circles -> start at X=0
            svg.selectAll("mycircle")
              .data(data)
              .enter()
              .append("circle")
                .attr("cx", x(0) )
                .attr("cy", function(d) { return y(d.cat); })
                .attr("r", "7")
                .style("fill", "#69b3a2")
                .attr("stroke", "black")
            
            // Change the X coordinates of line and circle
            svg.selectAll("circle")
              .transition()
              .duration(2000)
              .attr("cx", function(d) { return x(d.score); })
            
            
            svg.selectAll("line")
              .transition()
              .duration(2000)
              .attr("x1", function(d) { return x(d.score); })
            
            })
            </script>
    </body>